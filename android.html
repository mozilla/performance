<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Android Metrics</title>

<link href="https://fonts.googleapis.com/css2?family=Zilla+Slab:wght@400;700&display=swap" rel="stylesheet">
<link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.1/css/all.min.css" rel="stylesheet">
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<link rel="stylesheet" href="assets/main-ui-style.css">

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment/min/moment.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-moment"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pako/2.0.4/pako.min.js"></script>

<link rel="stylesheet" href="assets/android-style.css">

<script src="assets/android-metrics.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", () => {
      const dataUrl = 'https://raw.githubusercontent.com/mozilla/performance-data/refs/heads/main/android-data.json.gz';
      generateContent(dataUrl);
  });
</script>

</head>
<body>
<div class="top">
  <a href="javascript:history.back()" class="btn back-btn" title="Go Back">
    <i class="fa-solid fa-arrow-left"></i>
  </a>
  <div class="top-title-container">
    <div class="top-title">
      <b>moz://a</b> performance portal
    </div>
  </div>
  <a href="https://firefox-source-docs.mozilla.org/performance/reporting_a_performance_problem.html" class="btn" title="Report a Performance Bug">
    <i class="fa-solid fa-bug"></i> Report Performance Issue
  </a>
</div>

<div class="main-content">
  <aside class="main-sidebar" id="main-sidebar">
  </aside>

  <div class="content android-content">
    <div class="device-selector">
      <button id="a55-button" class="device-button active" onclick="selectDevice('a55')">A55</button>
      <button id="p6-button" class="device-button" onclick="selectDevice('p6')">P6</button>
      <button id="s24-button" class="device-button" onclick="selectDevice('s24')">S24</button>
    </div>

    <div class="row-title" id="main-chart-section">
      <a id="main-chart-title" href="#" target="_blank">newssite-applink-startup (A55)</a>
    </div>
    <div class="main-chart-container">
      <canvas id="main-chart"></canvas>
    </div>

    <div class="row-title" id="summary-section">Test Results</div>

    <div class="table-container">
      <table class="styled-table" id="summary-table">
        <thead>
          <tr>
            <th colspan="4" scope="colgroup">Latest (7 day avg)</th>
          </tr>
          <tr>
            <th onclick="sortTable('name')" class="testName">Test Name</th>
            <th onclick="sortTable('firefoxAvg')">Firefox</th>
            <th onclick="sortTable('chromeAvg')">Chrome</th>
            <th onclick="sortTable('difference')">Difference (%)</th>
          </tr>
        </thead>
        <tbody id="tableBody">
        </tbody>
      </table>
    </div>
  </div>

  <script>
      window.tests = [
        {
          name: "newssite-applink-startup (A55)",
          metric: ["newssite-applink-startup-a55"],
          unit: "ms"
        },
        {
          name: "newssite-applink-startup (P6)",
          metric: ["newssite-applink-startup-p6"],
          unit: "ms"
        },
        {
          name: "newssite-applink-startup (S24)",
          metric: ["newssite-applink-startup-s24"],
          unit: "ms"
        },
        {
          name: "shopify-applink-startup (A55)",
          metric: ["shopify-applink-startup-a55"],
          unit: "ms"
        },
        {
          name: "shopify-applink-startup (P6)",
          metric: ["shopify-applink-startup-p6"],
          unit: "ms"
        },
        {
          name: "shopify-applink-startup (S24)",
          metric: ["shopify-applink-startup-s24"],
          unit: "ms"
        },
        {
          name: "homeview-startup (A55)",
          metric: ["homeview-startup-a55"],
          unit: "ms"
        },
        {
          name: "homeview-startup (P6)",
          metric: ["homeview-startup-p6"],
          unit: "ms"
        },
        {
          name: "homeview-startup (S24)",
          metric: ["homeview-startup-s24"],
          unit: "ms"
        },
        {
          name: "restore-startup (A55)",
          metric: ["restore-startup-a55"],
          unit: "ms"
        },
        {
          name: "restore-startup (P6)",
          metric: ["restore-startup-p6"],
          unit: "ms"
        },
        {
          name: "restore-startup (S24)",
          metric: ["restore-startup-s24"],
          unit: "ms"
        },
        {
          name: "cold_view_nav_start.mean",
          metric: ["cold_view_nav_start.mean"],
          unit: "ms"
        },
        {
          name: "cold_main_first_frame.mean",
          metric: ["cold_main_first_frame.mean"],
          unit: "ms"
        },
        {
          name: "sp3",
          metric: ["score"],
          unit: "score"
        },
        {
          name: "sp3-cpuTime",
          metric: ["cpuTime"],
          unit: "ms"
        },
        {
          name: "sp3-powerUsage",
          metric: ["powerUsage"],
          unit: "mWh"
        },
        //{
        //  name: "background-main-cpuTime",
        //  metric: ["cpuTime-main-geomean"],
        //  unit: "ms"
        //},
        //{
        //  name: "background-gpu-cpuTime",
        //  metric: ["cpuTime-gpu-geomean"],
        //  unit: "ms"
        //},
        //{
        //  name: "background-tab-cpuTime",
        //  metric: ["cpuTime-tab-geomean"],
        //  unit: "ms"
        //},
        //{
        //  name: "background-main-rss",
        //  metric: ["rss-main-geomean"],
        //  unit: "kB"
        //},
        //{
        //  name: "background-gpu-rss",
        //  metric: ["rss-gpu-geomean"],
        //  unit: "kB"
        //},
        //{
        //  name: "background-tab-rss",
        //  metric: ["rss-tab-geomean"],
        //  unit: "kB"
        //},
        //{
        //  name: "background-main-pss",
        //  metric: ["pss-main-geomean"],
        //  unit: "kB"
        //},
        //{
        //  name: "background-gpu-pss",
        //  metric: ["pss-gpu-geomean"],
        //  unit: "kB"
        //},
        //{
        //  name: "background-tab-pss",
        //  metric: ["pss-tab-geomean"],
        //  unit: "kB"
        //},
        //{
        //  name: "allrecipes",
        //  metric: ["allrecipes-ContentfulSpeedIndex"],
        //  unit: "CSI"
        //},
        //{
        //  name: "amazon-search",
        //  metric: ["amazon-search-ContentfulSpeedIndex"],
        //  unit: "CSI"
        //},
        //{
        //  name: "espn",
        //  metric: ["espn-ContentfulSpeedIndex"],
        //  unit: "CSI"
        //},
        //{
        //  name: "google",
        //  metric: ["google-ContentfulSpeedIndex"],
        //  unit: "CSI"
        //},
        //{
        //  name: "microsoft-support",
        //  metric: ["microsoft-support-ContentfulSpeedIndex"],
        //  unit: "CSI"
        //},
        //{
        //  name: "amazon",
        //  metric: ["amazon-ContentfulSpeedIndex"],
        //  unit: "CSI"
        //},
        //{
        //  name: "bing",
        //  metric: ["bing-ContentfulSpeedIndex"],
        //  unit: "CSI"
        //},
        //{
        //  name: "bing-search-restaurants",
        //  metric: ["bing-search-restaurants-ContentfulSpeedIndex"],
        //  unit: "CSI"
        //},
        //{
        //  name: "booking",
        //  metric: ["booking-ContentfulSpeedIndex"],
        //  unit: "CSI"
        //},
        //{
        //  name: "cnn",
        //  metric: ["cnn-ContentfulSpeedIndex"],
        //  unit: "CSI"
        //},
        //{
        //  name: "cnn-ampstories",
        //  metric: ["cnn-ampstories-ContentfulSpeedIndex"],
        //  unit: "CSI"
        //},
        //{
        //  name: "dailymail",
        //  metric: ["dailymail-ContentfulSpeedIndex"],
        //  unit: "CSI"
        //},
        //{
        //  name: "ebay-kleinanzeigen",
        //  metric: ["ebay-kleinanzeigen-ContentfulSpeedIndex"],
        //  unit: "CSI"
        //},
        //{
        //  name: "ebay-kleinanzeigen-search",
        //  metric: ["ebay-kleinanzeigen-search-ContentfulSpeedIndex"],
        //  unit: "CSI"
        //},
        //{
        //  name: "facebook-cristiano",
        //  metric: ["facebook-cristiano-ContentfulSpeedIndex"],
        //  unit: "CSI"
        //},
        //{
        //  name: "google-maps",
        //  metric: ["google-maps-ContentfulSpeedIndex"],
        //  unit: "CSI"
        //},
        //{
        //  name: "google-search-restaurants",
        //  metric: ["google-search-restaurants-ContentfulSpeedIndex"],
        //  unit: "CSI"
        //},
        //{
        //  name: "imdb",
        //  metric: ["imdb-ContentfulSpeedIndex"],
        //  unit: "CSI"
        //},
        //{
        //  name: "instagram",
        //  metric: ["instagram-ContentfulSpeedIndex"],
        //  unit: "CSI"
        //},
        //{
        //  name: "reddit",
        //  metric: ["reddit-ContentfulSpeedIndex"],
        //  unit: "CSI"
        //},
        //{
        //  name: "sina",
        //  metric: ["sina-ContentfulSpeedIndex"],
        //  unit: "CSI"
        //},
        //{
        //  name: "stackoverflow",
        //  metric: ["stackoverflow-ContentfulSpeedIndex"],
        //  unit: "CSI"
        //},
        //{
        //  name: "wikipedia",
        //  metric: ["wikipedia-ContentfulSpeedIndex"],
        //  unit: "CSI"
        //},
        //{
        //  name: "youtube",
        //  metric: ["youtube-ContentfulSpeedIndex"],
        //  unit: "CSI"
        //}
      ];
  </script>
  </div>
</div>
<script src="assets/main-ui.js"></script>
</body>
</html>
